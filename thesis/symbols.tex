\newcommand{\figdefw}[3]{%
\begin{figure}[htbp]
\center
\includegraphics[width=#1]{pictures/#2.pdf}
\caption{#3}\label{#2}
\end{figure}}

\newcommand{\figdef}[2]{\figdefw{.9\textwidth}{#1}{#2}}

\newcommand{\eqdef}{\stackrel{\text{\tiny def}}{=}}


\newcommand{\red}[1]{{\color{red}#1}}

\newcommand{\GRM}{\tool{Grammatic}}
\newcommand{\ATF}{\tool{Grammatic$^{SDT}$}}

\newcommand{\figref}[1]{Рис.~\ref{#1}}
\newcommand{\lstref}[1]{Лист.~\ref{#1}}
\newcommand{\tabref}[1]{Таб.~\ref{#1}}
\newcommand{\term}[1]{\emph{#1}}
\newcommand{\code}[1]{\mbox{\footnotesize\texttt{#1}}}
\newcommand{\tool}[1]{\textsc{#1}}
\newcommand{\bad}[1]{{\color{red}\textbf{#1}}}



\newcommand{\SideNote}[1]{\marginpar{\color{red}#1}}

\newcommand{\Or}{\;\,|\;\,}
\newcommand{\sem}[1]{\lceil #1 \rceil}
\newcommand{\semRC}[1]{\sem{#1}_\RContext}
\newcommand{\denot}[1]{[\![#1]\!]}
\newcommand{\denotRCC}[1]{\denot{#1}_\RContext^C}
\newcommand{\denotRCCm}[2]{\denot{#2}_{\RContext_{#1}}^C}


%%%%% ModelTerms
\newcommand{\ModelTerm}{\mbox{MT}}
\newcommand{\Property}{\mbox{P}}
\newcommand{\typestyle}[1]{\mathsf{#1}}
\newcommand{\CharT}{\typestyle{Char}}
\newcommand{\StringT}{\typestyle{String}}
\newcommand{\IntegerT}{\typestyle{Int}}
\newcommand{\BooleanT}{\typestyle{Bool}}
\newcommand{\String}[1]{\mathsf{#1}}
\newcommand{\constantstyle}[1]{\mathtt{#1}}
\newcommand{\Null}{\constantstyle{null}}
\newcommand{\True}{\constantstyle{true}}
\newcommand{\False}{\constantstyle{false}}
\newcommand{\Ref}[1]{@#1}
\newcommand{\ObjectH}[2]{\mathbf{object}\;#1 : #2}
\newcommand{\Object}[3]{\ObjectH{#1}{#2}\left\{ #3 \right\}}
\newcommand{\List}[1]{\left[#1\right]}
\newcommand{\Set}[1]{\left\{#1\right\}}
\newcommand{\RContext}{\Psi}

\newcommand{\RefSt}[1]{\Ref{\String{#1}}}

%%% Congruence
\newcommand{\MCong}{\cong}
\newcommand{\nMCong}{\ncong}

%%% Subterms
\newcommand{\SubtermsName}{\mathcal{S}}
\newcommand{\SubtermsT}[2]{\SubtermsName_{#1}\left(#2\right)}
\newcommand{\Subterms}[1]{\SubtermsT{}{#1}}
\newcommand{\Objects}[1]{\SubtermsT{obj}{#1}}
\newcommand{\Sets}[1]{\SubtermsT{set}{#1}}
\newcommand{\Refs}[1]{\SubtermsT{ref}{#1}}
\newcommand{\Metainfo}{\mathcal{M}}
\newcommand{\ObjectsNoMi}[1]{\SubtermsName_{obj}^{\overline{\Metainfo}}\left(#1\right)}

%%% Classes
\newcommand{\Class}[3]{\mathbf{class}\;#1 : #2 \left\{#3\right\}}
\newcommand{\CClass}[3]{\underline{\mathbf{class}}\;#1 : #2 \left\{#3\right\}}
\newcommand{\AClass}[3]{\mbox{\textbf{\textit{class}}}\;#1 : #2 \left\{#3\right\}}

\newcommand{\Enum}[2]{\mathbf{enum}\;#1\left\{#2\right\}}

\newcommand{\Types}{\mathfrak{T}}

\newcommand{\TContext}{\Types}
\newcommand{\MMM}{\mathfrak{M}}

\newcommand{\AnyT}{\top}
\newcommand{\type}[2]{#1\left(#2\right)}%
\newcommand{\valts}{\mathbf{val}}%
\newcommand{\valt}[1]{\type{\valts}{#1}}%
\newcommand{\refts}{\mathbf{ref}}%
\newcommand{\reft}[1]{\type{\refts}{#1}}%
\newcommand{\ClassT}[1]{\type{\valts}{#1}}
\newcommand{\RefT}[1]{\type{\refts}{#1}}
\newcommand{\ListT}[1]{\List{#1}}
\newcommand{\SetT}[1]{\Set{#1}}
\newcommand{\NullableT}[1]{{#1}^?}
\newcommand{\EnumT}[1]{\mathbf{enum}\left(#1\right)}

\newcommand{\AllSuperclasses}[1]{\overline{S}\left(#1\right)}
\newcommand{\AllProps}[1]{\overline{P}\left(#1\right)}
\newcommand{\Classes}[1]{\overline{C}\left(#1\right)}
\newcommand{\Composed}[1]{\overline{C}_{comp}\left(#1\right)}

\newcommand{\Language}[1]{\mathcal{L}\left(#1\right)}

%
\newcommand{\class}[4]{\mathbf{class}\; #1 \langle #2, #3, #4\rangle}%
\newcommand{\classf}[3]{\mathbf{class}\; #1 \langle #2, #3\rangle}%
\newcommand{\reference}[3]{\mathbf{#1}\langle #2 : #3\rangle}%
\newcommand{\attribute}[2]{\mathbf{attr}\langle #1 : #2\rangle}%
%
%
\newcommand{\fromMM}{\RContext, \MM{M} \Vdash}
\newcommand{\obj}[3]{#1@#2\left\{#3\right\}}%
\newcommand{\refv}[2]{\mathbf{ref}\; #1@#2}%
%

\newcommand{\MM}[1]{\mathcal{#1}}%
\newcommand{\InstSign}{\mathcal{E}}
\newcommand{\Inst}[2]{\InstSign_{r, #1} \left\langle #2 \right\rangle}%
\newcommand{\InstC}[3]{\InstSign_{#1,#2} \left\langle #3 \right\rangle}%
\newcommand{\InstL}[2]{\InstSign_{r, #1}^{L} \left\langle #2 \right\rangle}%
\newcommand{\InstS}[2]{\InstSign_{r, #1}^{S} \left\langle #2 \right\rangle}%
\newcommand{\match}[3][]{#2 \; \mathbf{match}_{#1} \; #3}
\newcommand{\matchNV}[3][]{#2 \; \overline{\mathbf{match}}_{#1} \; #3}
\newcommand{\ang}[1]{\mathsf{<}#1\mathsf{>}}
\newcommand{\wcard}[2]{\mathsf{<} #1 : #2 \mathsf{>} }
\newcommand{\ME}{\Upsilon}
\newcommand{\meitem}[2]{\left\{ #1 \mapsto #2 \right\}}
\newcommand{\meempty}{\left\{\right\}}
\DeclareMathOperator{\MEjoin}{\mbox{\Large$\uplus$\hspace{-2pt}}}
\DeclareMathOperator{\mejoin}{\uplus}
%\newcommand{\mejoin}{\uplus}
\newcommand{\mereplace}{\pitchfork}
\newcommand{\meflatten}[1]{\overline{#1}}
\newcommand{\subtype}{\preceq}
\newcommand{\suptype}{\succeq}
\newcommand{\myinfer}[3][]{\infer[\mbox{#1}]{#2}{#3}}
\newcommand{\matchList}[3]{\mathit{matchList}_{#1}(#2,\, #3)}
\newcommand{\matchSet}[3]{\mathit{matchSet}_{#1}(#2,\, #3)}
\newcommand{\trule}[3]{%
\myinfer[#3]{#2}{#1}%(\mbox{\textsc{#3}})%
}%
\newcommand{\rref}[1]{\mbox{\textit{#1}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%


\newcommand{\TM}{\mathcal{M}^{\mathcal{T}}}
\newcommand{\TC}[1]{\mathcal{T}\left(#1\right)}
\newcommand{\TR}[1]{{\color{red}\mathcal{TR}\left(#1\right)}}
\newcommand{\TA}[1]{{\color{red}\mathcal{TA}\left(#1\right)}}
\newcommand{\TP}[1]{\mathcal{T}\left(#1\right)}
\newcommand{\TT}[1]{\mathcal{T}\left(#1\right)}
%\renewcommand{\vec}[1]{\overrightarrow{\mbox{#1}}}
\newcommand{\ct}[1]{\MM{M}\left(#1\right)}
\newcommand{\h}[1]{h\left(#1\right)}

\newcommand{\M}{\MM{M}}
\newcommand{\Sem}{\mathcal{I}}


\newcommand{\CopyRM}[3]{\mathsf{Copy}_{#1, #2}\left(#3\right)}
\newcommand{\Copy}[1]{\CopyRM{r}{m}{#1}}
\newcommand{\LConcat}{\oplus}
\newcommand{\idmap}{\mathsf{map}}
\newcommand{\newid}{\mathsf{new}}
\newcommand{\idmapcompose}{\blacktriangleright}

\newcommand{\dom}{\mathbf{dom}}
\newcommand{\range}{\mathbf{rng}}