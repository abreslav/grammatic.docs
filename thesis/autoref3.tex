\afsubsection{Третья глава} посвящена описанию генератора трансляторов \ATF{}, построенного на базе языка \GRM{}. Отличительной особенностью данного инструмента является механизм проверки типов в семантических действиях, обеспечивающий раннее обнаружение ошибок. Практически все существующие генераторы не выполняют таких проверок, что приводит к появлению ошибок компиляции в сгенерированном коде и затрудняет разработку. Кроме того, имеется возможность генерации кода на нескольких \term{языках реализации}\footnote{Язык программирования, код на котором является результатом работы генератора.} по одной спецификации, что важно для разработки предметно-ориентированных языков, поскольку эти языки не должны ограничивать разработчиков в выборе платформы или языка общего назначения. Результаты сравнения возможностей \ATF{} с другими инструментами приведены в \tabref{AtfTable}. Дополнительным преимуществом \ATF{} является возможность использования шаблонов и аспектов, позволяющих, в частности, определять несколько спецификаций трансляторов для одной грамматики.

\begin{table}[htbp]
	\centering
\newcommand{\size}{\small}
\newcommand{\dissonly}[1]{}
	\input{atf.table.tex}
	\caption{Сравнение \ATF{} с существующими инструментами}\label{AtfTable}
\end{table}

\ATF{} принимает на вход грамматику, аннотированную семантическими действиями, задающими схему L-атрибутной трансляции, выполняет статические проверки и генерирует транслятор, используя один из существующих инструментов (например, \tool{ANTLR}). Для различных языков реализации могут быть использованы различные инструменты. Семантические действия пишутся на абстрактном языке, поддерживающем следующие операции: (а) чтение и запись атрибута, (б) вызов внешней функции, написанной на языке реализации, (в) передача параметров функциям, осуществляющим разбор. По спецификации на языке \ATF{} генерируется транслятор и заголовки использованных внешних функций на языке реализации.

Стандартные правила системы типов для присваиваний, описания и вызовов функций в случае \ATF{} параметризованы отношением ``подтип-супертип'', обозначаемым $\lel$ и регламентирующим полиморфизм, и множеством $\G$ конкретных \term{базовых типов}, среди которых специально выделяется тип символьных строк $\Str$. Механизмы проверки и реконструкции типов работают для произвольных значений этих параметров и имеют открытый программный интерфейс, позволяющий создавать расширения, поддерживающие различные языки реализации. В частности, автором разработано расширение, интегрирующее \ATF{} с системой типов языка \tool{Java}. 

Кроме возможности создания расширений системы типов для интеграции с конкретными языками реализации, разработано и ``универсальное'' расширение, позволяющее декларативно описывать множество базовых типов и отношение $\lel$. Такого описания (называемого системой типов \term{абстрактного уровня}) достаточно для проверки и вывода типов в спецификациях. Для правильной работы генератора необходимо указать, как типы абстрактного уровня отображаются на типы языка реализации. Декларативное описание этого отображения называется системой типов \term{конкретного уровня}.
Таким образом, для каждой спецификации существует ровно одна система типов абстрактного уровня и, возможно, несколько систем конкретного уровня --- как минимум, по одной на каждый язык реализации. Описания конкретного уровня можно добавлять, не изменяя спецификации.

Транслятор языка \GRM{} был реализован с помощью \ATF{}: основным языком реализации является \tool{Java}, а для генерации синтаксического анализатора используется \tool{ANTLR}.

